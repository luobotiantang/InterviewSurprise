# ZK相关

 - [分布式协调](#分布式协调)
 
 - [分布式锁](#分布式锁)
 
 - [配置信息管理](#配置信息管理)
 
 - [HA的高可用场景](#HA的高可用场景)
 
 
 ### 分布式协调
 
     服务A通过异步向MQ发送一条消息，由服务B执行，zookeeper此时就作为一个协调者，服务A和服务B都会往注册中心注册，
     zookeeper去监控服务A和服务B,假如服务B更改订单状态了，zookeeper就会监听到然后服务A就会知道服务B是否执行成功。

             
 ### 分布式锁
 
     同一个服务不同机器同一时刻只能获取一把锁，其他服务如果没有获取到锁对这个锁注册一个监听器由zookeeper通知，感知
     到锁被释放之后就尝试获取锁。
     获取锁的时候就会创建临时节点，如果这个临时节点之前不存在那么就创建成功了，zookeeper保证只有一个人可以获取到同一
     把锁，其他机器尝试创建临时节点此时如果临时节点存在则创建失败，那么就会对那个临时节点注册一个监听器，如果这个临时节点
     的锁被释放了及第一个服务宕了此临时节点被zookeeper删除了，那么zookeeper就会通知此服务的然后此服务就会获取临时节点。
     对比:
        redis锁依赖与集群，每个一段时间尝试获取锁造成性能开销
        zookeeper是通过消息监听的方式，相对redis分布式锁要好
     
 ### 配置信息管理
 
 ### HA的高可用场景
    
     主备都会注册到zookeeper,如果主挂了那么就会通知临时节点让其变为主。    

> reubenwang@foxmail.com
> 没事别找我，找我也不在！--我很忙🦆